<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hyrule Royal Warehouse | Hyrule Royal Warehouse</title>

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Hyrule Royal Warehouse | Mundana is a free Jekyll theme for awesome people like you, Medium like.</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Hyrule Royal Warehouse" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A great Jekyll theme developed by Sal @wowthemesnet." />
<meta property="og:description" content="A great Jekyll theme developed by Sal @wowthemesnet." />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Hyrule Royal Warehouse" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Hyrule Royal Warehouse" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"A great Jekyll theme developed by Sal @wowthemesnet.","headline":"Hyrule Royal Warehouse","name":"Hyrule Royal Warehouse","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/logo.png"}},"url":"http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Google Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet">

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="/assets/css/theme.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    <!-- This goes before </head> closing tag, Google Analytics can be placed here --> 


    

</head>

<body class=" homefirstpage ">

    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/index.html"><strong>Hyrule Royal Warehouse</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02" style="">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               <!--  Replace menu links here -->

<li class="nav-item">
<a class="nav-link" href="/index.html">Home</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/authors-list.html">Authors</a>
</li>
<!-- <li class="nav-item">
<a class="nav-link" href="/contact.html">Contact</a>
</li>
<li class="nav-item">
<a target="_blank" class="nav-link" href="https://www.wowthemes.net/themes/mundana-wordpress/">WP</a>
</li>
<li class="nav-item">
<a target="_blank" class="nav-link" href="https://www.wowthemes.net/themes/mundana-ghost/">Ghost</a>
</li> -->
<li class="nav-item">
<a target="_blank" class="nav-link" href="https://ko-fi.com/samwitwicky">Buy me a coffee <i class="fa fa-coffee text-danger"></i></a>
</li>

            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                <script src="/assets/js/lunr.js"></script>

<script>
$(function() {
    $("#lunrsearchresults").on('click', '#btnx', function () {
        $('#lunrsearchresults').hide( 1000 );
        $( "body" ).removeClass( "modal-open" );
    });
});
    

var documents = [{
    "id": 0,
    "url": "http://localhost:4000/404/",
    "title": "",
    "body": " 404 Page not found :(  The requested page could not be found. "
    }, {
    "id": 1,
    "url": "http://localhost:4000/about.html",
    "title": "About",
    "body": "Made with by Sal @wowthemesnet. "
    }, {
    "id": 2,
    "url": "http://localhost:4000/author-jane.html",
    "title": "Jane",
    "body": "                        Jane Follow:                                                    Posts by Jane:               "
    }, {
    "id": 3,
    "url": "http://localhost:4000/author-sal.html",
    "title": "Sal",
    "body": "                        Sal Follow:                                                    Posts by Sal:               "
    }, {
    "id": 4,
    "url": "http://localhost:4000/authors-list.html",
    "title": "Authors",
    "body": "Authors:                                             C. R. Zhang :       (View Posts)      Main developer of this site.                           &nbsp;       &nbsp;                                                                             C. Y. Wang :       (View Posts)      Co-blogger of this site.                           &nbsp;       &nbsp;                                      "
    }, {
    "id": 5,
    "url": "http://localhost:4000/buy-me-a-coffee.html",
    "title": "Buy me a coffee",
    "body": "Hi! I am Sal, web designer &amp; developer at WowThemes. net. The free items I create are my side projects and Mundana for Jekyll is one of them. You can find all the work I release for free here. You have my permission to use the free items I develop in your personal, commercial or client projects. If you’d like to reward my work, I would be honored and I could dedicate more time maintaining the free projects. Thank you so much! Buy me a coffee "
    }, {
    "id": 6,
    "url": "http://localhost:4000/categories.html",
    "title": "Categories",
    "body": "          Categories               入门:                                  		关于本站 - About This Website	: 		  Welcome to Hyrule Royal Warehouse. 	 			In 				入门, 				Start, 								Nov 10, 2025						                              Start:                                  		关于本站 - About This Website	: 		  Welcome to Hyrule Royal Warehouse. 	 			In 				入门, 				Start, 								Nov 10, 2025						                              算法:                                  		电梯调度 - 同济大学操作系统课设	: 		  开发环境	 			In 				算法, 								Dec 15, 2025						                                 		力扣第1219题黄金矿工时间复杂度新解	: 		  算法思路	 			In 				算法, 								Dec 11, 2025						                              Algorithm:                                  		A New Perspective on Time Complexity for LeetCode 1219: Path with Maximum Gold	: 		  Algorithm Approach	 			In 				Algorithm, 								Dec 15, 2025						                                 		Elevator Scheduling - Tongji University Operating System Course Project	: 		  Development Environment	 			In 				Algorithm, 								Dec 14, 2025						                                             Featured:    				                  "
    }, {
    "id": 7,
    "url": "http://localhost:4000/contact.html",
    "title": "Contact",
    "body": "  Please send your message to Hyrule Royal Warehouse. We will reply as soon as possible!   "
    }, {
    "id": 8,
    "url": "http://localhost:4000/",
    "title": "Hyrule Royal Warehouse",
    "body": "                                  A New Perspective on Time Complexity for LeetCode 1219: Path with Maximum Gold  :       Algorithm Approach               In                 Algorithm,                                        Dec 15, 2025                                                                                                                             电梯调度 - 同济大学操作系统课设          :                       In                         算法,                                                                  Dec 15, 2025                                                                                                                                     Elevator Scheduling - Tongji University Operating System Course Project          :                       In                         Algorithm,                                                                  Dec 14, 2025                                                                                                                                    力扣第1219题黄金矿工时间复杂度新解          :                       In                         算法,                                                                  Dec 11, 2025                                                         关于本站 - About This Website                  Welcome to Hyrule Royal Warehouse.                 Read More            	                               All Stories:                   		关于本站 - About This Website	: 		  Welcome to Hyrule Royal Warehouse. 	 			In 				入门, 				Start, 								Nov 10, 2025						                                                  Featured:    				              "
    }, {
    "id": 9,
    "url": "http://localhost:4000/index.html.bk",
    "title": "Mundana Free Jekyll Theme",
    "body": "  {% if page. url ==  /  %}            {% assign latest_post = site. posts[0] %}          &lt;div class= topfirstimage  style= background-image: url({% if latest_post. image contains  ://  %}{{ latest_post. image }}{% else %} {{site. baseurl}}/{{ latest_post. image}}{% endif %}); height: 200px;  background-size: cover;  background-repeat: no-repeat; &gt;&lt;/div&gt;           {{ latest_post. title }}  :       {{ latest_post. excerpt | strip_html | strip_newlines | truncate: 136 }}               In         {% for category in latest_post. categories %}        {{ category }},         {% endfor %}                                {{ latest_post. date | date: '%b %d, %Y' }}                            {%- assign second_post = site. posts[1] -%}                        {% if second_post. image %}                         &lt;img class= w-100  src= {% if second_post. image contains  ://  %}{{ second_post. image }}{% else %}{{ second_post. image | absolute_url }}{% endif %}  alt= {{ second_post. title }} &gt;                        {% endif %}                                    {{ second_post. title }}          :                       In             {% for category in second_post. categories %}            {{ category }},             {% endfor %}                                                      {{ second_post. date | date: '%b %d, %Y' }}                                    {%- assign third_post = site. posts[2] -%}                        {% if third_post. image %}                         &lt;img class= w-100  src= {% if third_post. image contains  ://  %}{{ third_post. image }}{% else %}{{site. baseurl}}/{{ third_post. image }}{% endif %}  alt= {{ third_post. title }} &gt;                        {% endif %}                                    {{ third_post. title }}          :                       In             {% for category in third_post. categories %}            {{ category }},             {% endfor %}                                                      {{ third_post. date | date: '%b %d, %Y' }}                                    {%- assign fourth_post = site. posts[3] -%}                        {% if fourth_post. image %}                        &lt;img class= w-100  src= {% if fourth_post. image contains  ://  %}{{ fourth_post. image }}{% else %}{{site. baseurl}}/{{ fourth_post. image }}{% endif %}  alt= {{ fourth_post. title }} &gt;                        {% endif %}                                    {{ fourth_post. title }}          :                       In             {% for category in fourth_post. categories %}            {{ category }},             {% endfor %}                                                      {{ fourth_post. date | date: '%b %d, %Y' }}                                  {% for post in site. posts %} {% if post. tags contains  sticky  %}                    {{post. title}}                  {{ post. excerpt | strip_html | strip_newlines | truncate: 136 }}                 Read More            	             {% endif %}{% endfor %}  {% endif %}                All Stories:         {% for post in paginator. posts %}          {% include main-loop-card. html %}        {% endfor %}                   {% if paginator. total_pages &gt; 1 %}              {% if paginator. previous_page %}        &laquo; Prev       {% else %}        &laquo;       {% endif %}       {% for page in (1. . paginator. total_pages) %}        {% if page == paginator. page %}        {{ page }}        {% elsif page == 1 %}        {{ page }}        {% else %}        {{ page }}        {% endif %}       {% endfor %}       {% if paginator. next_page %}        Next &raquo;       {% else %}        &raquo;       {% endif %}            {% endif %}                     {% include sidebar-featured. html %}      "
    }, {
    "id": 10,
    "url": "http://localhost:4000/privacy-policy.html",
    "title": "Privacy Policy",
    "body": "”{{site. name}}” takes your privacy seriously. To better protect your privacy we provide this privacy policy notice explaining the way your personal information is collected and used. Collection of Routine Information: This website track basic information about their visitors. This information includes, but is not limited to, IP addresses, browser details, timestamps and referring pages. None of this information can personally identify specific visitor to this website. The information is tracked for routine administration and maintenance purposes. Cookies: Where necessary, this website uses cookies to store information about a visitor’s preferences and history in order to better serve the visitor and/or present the visitor with customized content. Advertisement and Other Third Parties: Advertising partners and other third parties may use cookies, scripts and/or web beacons to track visitor activities on this website in order to display advertisements and other useful information. Such tracking is done directly by the third parties through their own servers and is subject to their own privacy policies. This website has no access or control over these cookies, scripts and/or web beacons that may be used by third parties. Learn how to opt out of Google’s cookie usage. Links to Third Party Websites: We have included links on this website for your use and reference. We are not responsible for the privacy policies on these websites. You should be aware that the privacy policies of these websites may differ from our own. Security: The security of your personal information is important to us, but remember that no method of transmission over the Internet, or method of electronic storage, is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security. Changes To This Privacy Policy: This Privacy Policy is effective and will remain in effect except with respect to any changes in its provisions in the future, which will be in effect immediately after being posted on this page. We reserve the right to update or change our Privacy Policy at any time and you should check this Privacy Policy periodically. If we make any material changes to this Privacy Policy, we will notify you either through the email address you have provided us, or by placing a prominent notice on our website. Contact Information: For any questions or concerns regarding the privacy policy, please contact us here. "
    }, {
    "id": 11,
    "url": "http://localhost:4000/tags.html",
    "title": "Tags",
    "body": "          Tags          {% for tag in site. tags %}     {{ tag[0] }}:           {% assign pages_list = tag[1] %}    {% for post in pages_list %}    {% if post. title != null %}     {% if group == null or group == post. group %}           {% include main-loop-card. html %}     {% endif %}    {% endif %}    {% endfor %}    {% assign pages_list = nil %}    {% assign group = nil %}    {% endfor %}                  {% include sidebar-featured. html %}          "
    }, {
    "id": 12,
    "url": "http://localhost:4000/robots.txt",
    "title": "",
    "body": "      Sitemap: {{ “sitemap. xml”   absolute_url }}   "
    }, {
    "id": 13,
    "url": "http://localhost:4000/LeetCode1219-en/",
    "title": "A New Perspective on Time Complexity for LeetCode 1219: Path with Maximum Gold",
    "body": "2025/12/15 - Algorithm Approach: A 2D vector is used to store the distribution of the gold mines. The algorithm first traverses the entire grid. Any coordinate with a non-zero value is treated as a starting point. We employ DFS (Depth-First Search) with backtracking to search the entire graph. During the search process, visited coordinates are marked (by setting the gold amount to 0), while tracking the currently accumulated gold. The class maintains a max variable to record the maximum gold collected and a path variable to store the optimal path. Whenever a path yielding more gold is found, both max and path are updated simultaneously. During backtracking, the stack recording the current path is popped once, and the visited marker is released. Consequently, the path with the maximum gold and the total amount can be determined. Complexity Analysis: Since the search result depends on the traversal of areas containing gold, let \(k\)be the total number of cells with gold. Let\(m\)be the number of rows and\(n\)be the number of columns. Obviously,\(k \le mn\). Therefore, any subsequent operations involving \(\min\{mn, k\}\)can be simplified directly to\(k\). The algorithm uses two stacks to store the path; thus, the space complexity is \(O(k+k)\), which simplifies to \(O(k)\). Let us define a forward exploration step as the basic operation. Each cell with gold can serve as a starting point for DFS traversal, resulting in a total of \(k\)traversals. In each traversal, apart from the starting point, every cell has at most three different directions to proceed. Therefore, the exploration operations scale with at least\(3k\). It follows that the worst-case time complexity is \(O(3^k)\). However, upon testing with map data where \(k=25\), the execution efficiency was surprisingly high. It did not exhibit the inefficiency expected from a base-3 exponential function. This suggests that the estimated upper bound of “\(3^k\) total exploration operations per starting point” is overly loose. Since exploration operations only occur in cells containing gold, we analyze them separately. For any collection path, excluding the start and end cells, the intermediate cells are traversed in one of the following seven patterns:  Left-in Up-out or Up-in Left-out — abbreviated as LU Right-in Up-out or Up-in Right-out — abbreviated as RU Also LD, RD, LR, UD Not traversed by the path, noted as NThus, the solution space tree, originally constructed by three exploration directions per cell, is transformed into one based on the traversal patterns of each cell. Next, we divide all cells containing gold (excluding the start and end points) into a staggered black-and-white pattern as follows: (For convenience, assume they are clustered in a \(3 \times 3\) grid).  From the seven patterns mentioned above, we know that if the state of every black cell is determined, the state of the white cells is implicitly determined. Therefore, we only need to consider the black cells. Clearly, this partition results in approximately \(k/2\) black cells. When generating the solution space tree, before traversing the 7 possibilities for cell B, the states of the four surrounding black cells have already been determined (excluding start/end points, which does not affect the complexity analysis). In the figure, if we assume A is determined as LR, then B is restricted to only four cases: LU, RU, UD, or N. The same logic applies elsewhere. Consequently, when generating the solution space tree, each black cell effectively has only 4 exploration choices for the next step. The worst-case time complexity does not exceed \(O(4^{k/2}) = O(2^k)\). In practice, since gold cells are not always clustered together, the available choices for each black cell will likely be fewer than 4, resulting in even lower time complexity. In summary, the worst-case time complexity does not exceed \(O(2^k)\). I encountered this problem during an algorithm course assignment. I felt the online time complexity analysis differed from my practical experience, so I made some improvements here. "
    }, {
    "id": 14,
    "url": "http://localhost:4000/Elevator/",
    "title": "电梯调度 - 同济大学操作系统课设",
    "body": "2025/12/15 - 开发环境:  开发环境：Windows 11 开发软件：Visual Studio 2022 开发语言：C# 主要引用模块：System, System. Threading实现的功能:  互联接的上下行按钮：当按下五部电梯门口的上下行按钮时，五部电梯都收到这个请求，根据调度算法决定具体由哪部电梯响应这个请求。 独立的楼层按钮：每部电梯都有各自的楼层按钮，当按下电梯内部的楼层按钮时，该请求由这部电梯响应，具体何时响应由调度算法决定。 添加乘客功能：支持添加乘客，需指定乘客起始楼层和目标楼层，调度算法决定由哪部电梯响应乘客的请求。 数码管显示电梯当前楼层：每部电梯都有一个数码管显示其当前所在楼层。 电梯状态显示：每部电梯都有一个标签显示电梯当前状态：有 up，down，wait，alarm 四种状态。 电梯容量显示：每部电梯都有一个标签显示电梯可用容量，初始为 5。 开门、关门键：当电梯到达乘客所在楼层和目标楼层时，需要完成开门和关门操作。 提示信息框：在特定时候弹出提示信息，显示乘客被分配到了哪部电梯以及提示用户进行开门或关门操作。 乘客状态表：根据乘客状态实时更新乘客当前所在楼层，只显示未到达目标楼层的乘客。界面: 操作指南:  用户可以随意点击数字键和上行下行键让电梯在没有乘客的情况下“空跑”，便于观察电梯调度算法的实际表现。 用户也可以在右侧的乘客管理模块添加乘客，设定乘客的起始楼层和目标楼层，观察乘客被分配到哪个电梯中，以及乘客乘上电梯时的实际楼层变化，当乘客到达目标楼层时，乘客将从表格中移除。 下方的状态栏显示提示信息，提示用户在必要时刻进行开门和关门操作。 乘客可以点击 “Open” 和 “Close” 键让电梯开门和关门，也可以按下 “Alarm” 键让电梯处于报警状态。 电梯所在楼层和剩余容量在每部电梯上方显示，电梯的当前状态在每部电梯下方显示。主要设计思路: 实现的类:  Form1类：程序的主窗口，负责UI的显示与更新，处理UI的点击事件，管理与乘客有关的逻辑、订阅 ElevatorController 中定义的事件。 ElevatorController类：实现了电梯的调度算法，管理电梯列表，定义了一些关键的事件。 Elevator类：记录电梯的属性，包括电梯的当前楼层，目标楼层，电梯的状态，电梯的容量，提供了一些公用的方法，可以对电梯的这些属性进行设置和获取。 Passenger类：记录每个乘客的ID，当前所在楼层和目标楼层，被分配到的电梯，以及请求是否已被处理。Elevator 类: 电梯的实体，记录每部电梯的状态（等待，上行，下行，报警），当前所在楼层和目标楼层，定义了一些必要的方法，用于得到或设置电梯内的一些成员变量： namespace ElevatorSystem{  public enum status  {    wait, up, down, alarm  };  public class Elevator  {    status currentStatus;    int currentFloor;    int targetFloor;    int capacity;    public Elevator(int current=0,int target=0)    {       currentFloor = current;      targetFloor = target;      capacity = 5;      currentStatus = status. wait;    }    public int getCurrentFloor() { return currentFloor; }    public int getTargetFloor() { return targetFloor;}    public int getCapacity() { return capacity;}    public void takePassenger() { capacity--; }    public void ariveTargetFloor() { capacity++; }    public void setTargetFloor(int target) { targetFloor = target; }    public void setStatus(status sta) { currentStatus = sta; }    public status getStatus() { return currentStatus; }    public void up()    {       currentStatus = status. up;      if (currentFloor &lt; 20)      {        currentFloor++;        Thread. Sleep(500);      }    }    public void down()    {      currentStatus = status. down;      if (currentFloor &gt; 0)      {        currentFloor--;        Thread. Sleep(500);      }    }    public void move()    {      if (currentFloor &lt; targetFloor) up();      if (currentFloor &gt; targetFloor) down();    }    public bool check()    {      if (capacity &lt; 0)      {        currentStatus = status. alarm;        return false;      }      return true;    }  }}Passenger 类: 乘客的实体，记录每个乘客的ID，当前所在楼层和目标楼层，被分配到的电梯，以及请求是否已被响应： namespace ElevatorSystem{  public class Passenger  {    public int id { get; set; }    public int currentFloor { get; set; }    public int targetFloor { get; set; }    public int assignedElevator { get; set; } // 假设电梯分配后存储电梯的编号    public bool isHandled { get; set; } = false; // 默认为false，表示未处理    public Passenger(int ID, int current, int target, int assigned)    {      id = ID;      currentFloor = current;      targetFloor = target;      assignedElevator = assigned;    }  }}类之间的联系: 通过在 Form1 中引入 ElevatorController 的示例 manage，实现两个类的交互，在 Form1 的初始化函数中完成对在 ElevatorController 中定义的事件的订阅： public Form1(){  InitializeComponent();  InitializeElevatorUI();  InitialMassageBox();  InitializeFloorRequestButtons();  InitializePassengerManagementUI();  manage = new ElevatorController();    // 事件订阅  manage. ElevatorMoved += Manage_ElevatorMoved;  manage. ElevatorRequestProcessed += Manage_ElevatorRequestProcessed;  manage. ElevatorExternalRequestProcessed += Manage_ExternalRequestProcessed;  manage. OpenDoorPressed += Manage_OpenDoorPressed;  manage. CloseDoorPressed += Manage_CloseDoorPressed;   LoadImages();  InitializeTimer();} 在Form1中定义Passenger类型的列表passengers，实现对乘客的管理； 在ElevatorController中定义Elevator类型的数组elevators，实现对五部电梯的管理；调度算法:  在ElevatorController中定义四个二维数组，记录需要处理的上行和下行请求，以及等待处理的上行和下行请求：  public int[,] upRequest = new int[ElevatorsCount, FloorsCount];public int[,] downRequest = new int[ElevatorsCount, FloorsCount];//wait数组里储存的是电梯需要经过状态变换才能处理的请求public int[,] waitUpRequest = new int[ElevatorsCount,FloorsCount];public int[,] waitDownRequest = new int[ElevatorsCount, FloorsCount];      wait数组里储存的时电梯需要经过状态变换才能处理请求；     当上行键被按下时，调用public int handleUpRequest(int floor)，处理上行请求；当下行键被按下时，调用public int handleDownRequest(int floor) ，处理下行请求；两个函数的返回值都是被分配到的电梯编号；具体来说，调度算法如下（以处理上行请求为例）：     根据每部电梯的状态和电梯所在楼层计算与被按下的上行键所在楼层的距离：          如果电梯处于静止状态，这个距离等于电梯所在楼层减去上行键所在楼层的绝对值；           如果电梯处于上行状态，那么分为两种情况：          电梯当前所在楼层大于上行键所在楼层，这个距离等于该电梯目前向上请求中最高的层减去电梯所在楼层的绝对值，加上电梯目前向上请求中最高的层减去上行键所在楼层的绝对值；     电梯当前所在楼层小于上行键所在楼层，这个距离等于电梯当前所在楼层减去上行键所在楼层的绝对值；              如果电梯处于下行状态，那么这个距离等于该电梯目前向下请求中的最低的层减去电梯所在楼层的绝对值，加上电梯目前向下请求中最低的层减去上行键所在楼层的绝对值；        选出与上行键所在楼层距离最近的电梯，并在其上行请求列表中添加上行键所在的楼层：     如果该电梯目前处于静止状态，那么有两种情况：         上行键所在楼层大于电梯所在楼层，把该请求添加进upRequest[elevatorIndex,floor]中，因为电梯即将改变成上行状态，该请求能立即得到处理；     上行键所在楼层小于电梯所在楼层，把该请求添加进waitUpRequest[elevatorIndex,floor]中，因为电梯需要先改变成下行状态，再改变成上行状态，才能处理该请求；          如果电梯目前处于上行状态，那么有两种情况：         上行键所在楼层大于电梯所在楼层，把该请求添加进upRequest[elevatorIndex,floor]中，因为电梯不需要改变状态就可以响应该请求；     上行键所在楼层小于电梯所在楼层，把该请求添加进waitUpRequest[elevatorIndex,floor]中，因为该电梯需要改变状态才能响应该请求；              如果电梯处于下行状态，那么直接把请求添加进waitUpRequest[elevator,Index]中，因为该电梯需要改变状态才能响应该请求。```csharppublic int handleUpRequest(int floor){int minDist = FloorsCount + 1;int elevatorIndex = ElevatorsCount;     for(int i=0;i&lt;ElevatorsCount;i++){  int currentFloor = elevators[i]. getCurrentFloor();  if (elevators[i]. getStatus()==status. alarm)  {    continue;  }  if (elevators[i]. getStatus()==status. wait)  {    if(Math. Abs(currentFloor-floor) &lt; minDist)    {      minDist=Math. Abs(currentFloor-floor);      elevatorIndex=i;    }  }  else if (elevators[i]. getStatus()==status. up)  {    if(currentFloor &lt;= floor)    {      if(Math. Abs(currentFloor-floor)&lt;minDist)      {         minDist = Math. Abs(currentFloor-floor);        elevatorIndex = i;       }    }    else if(currentFloor &gt; floor)    {      int tmp = 0;      //找到目前向上请求中最高的楼层      for(int j=FloorsCount-1;j&gt;=0;j–)      {        if (upRequest[i, j] == 1)        {          tmp = j;          break;        }      }      //计算距离      int dist = Math. Abs(tmp - currentFloor) + Math. Abs(tmp - floor);      if(dist&lt;minDist)      {        minDist=dist;        elevatorIndex = i;      }    }     }else if (elevators[i]. getStatus()==status. down){  int tmp = 0;  //找到目前向下请求中最小的层  for(int j=0;j&lt;FloorsCount;j++)  {    if (downRequest[i, j] == 1)    {      tmp = j;      break;    }  }  int dist=Math. Abs(tmp - currentFloor) + Math. Abs(tmp - floor);  if(dist&lt;minDist)   {    minDist=dist;    elevatorIndex = i;  } } } int currenFloor = elevators[elevatorIndex]. getCurrentFloor(); if (elevators[elevatorIndex]. getStatus()==status. wait) {   if(floor &gt;= currenFloor)  upRequest[elevatorIndex, floor] = 1;else  waitUpRequest[elevatorIndex, floor] = 1;   //upRequest[elevatorIndex, floor] = 1; } else if (elevators[elevatorIndex]. getStatus()==status. up)        {  if (floor &gt;= currenFloor)    upRequest[elevatorIndex, floor] = 1;  else    waitUpRequest[elevatorIndex, floor] = 1;}else  waitUpRequest[elevatorIndex,floor] = 1;     return elevatorIndex;}          当楼层按钮被按下时，直接对upRequest和downRequest进行修改，当在上行电梯中按下比电梯当前所在楼层小的楼层，将不会被响应，当在下行电梯中按下比电梯当前所在楼层小的楼层，将不会被响应：   private void FloorButton_Click(object sender, EventArgs e, int elevatorIndex, int floor) {    Button clickButton = sender as Button;      // 处理楼层按钮点击事件   //MessageBox. Show($ 电梯 {elevatorIndex + 1} 的第 {floor + 1} 层按钮被点击 );   if (manage. elevators[elevatorIndex]. getStatus()==status. up)   {     if (floor &gt;= manage. elevators[elevatorIndex]. getCurrentFloor())     {       manage. upRequest[elevatorIndex, floor] = 1;       if (clickButton != null)       {         clickButton. BackColor = Color. Green;       }      }   }   else if (manage. elevators[elevatorIndex]. getStatus()==status. down)   {     if (floor &lt;= manage. elevators[elevatorIndex]. getCurrentFloor())     {       manage. downRequest[elevatorIndex, floor] = 1;       if (clickButton != null)       {         clickButton. BackColor = Color. Green;       }      }   }   else   {     if (floor &gt;= manage. elevators[elevatorIndex]. getCurrentFloor())     {       manage. upRequest[elevatorIndex, floor] = 1;       if (clickButton != null)       {         clickButton. BackColor = Color. Green;       }      }     else     {       manage. downRequest[elevatorIndex,floor] = 1;       if (clickButton != null)       {         clickButton. BackColor = Color. Green;       }      }   } }    电梯运行逻辑:   为每部电梯启动一个独立的线程，并设置线程为后台线程，线程执行private void ElevatorRoutine(int elevatorIndex) 方法：```csharpprivate void StartElevatorThreads(){ for(int i=0;i&lt;ElevatorsCount;i++) {   int index = i;   Thread elevatorThread = new Thread(() =&gt; ElevatorRoutine(index))   {     IsBackground = true   };   elevatorThread. Start(); }}private void ElevatorRoutine(int elevatorIndex) {  while (true)  {   Thread. Sleep(500);  pullUpward(elevatorIndex);  Thread. Sleep(500);  prepareForDown(elevatorIndex);  Thread. Sleep(500);  pushDownward(elevatorIndex);  Thread. Sleep(500);  prepareForUp(elevatorIndex);} } ``` - 在void pullUpward(int elevatorIndex)里处理电梯的上行请求，在void pushDownward(int elevatorIndex)里处理电梯的下行请求； - 对waitUpRequest和waitDownRequest的处理分别在prepareForUp和prepareForDown中进行； - 在ElevatorController的初始化函数中启动线程： ```csharp public ElevatorController() {for(int i=0;i&lt;elevators. Length; i++) {  elevators[i] = new Elevator();}for(int i=0;i &lt; ElevatorsCount;i++){  for(int j=0;j &lt; FloorsCount;j++)  {    upRequest[i, j] = 0;    downRequest[i, j] = 0;    waitUpRequest[i, j] = 0;    waitDownRequest[i, j] = 0;  }}StartElevatorThreads(); } ``` ### 事件定义 - 在ElevatorController中定义了五个事件： ```csharp public event Action&lt;int, int&gt; ElevatorMoved; public event Action&lt;int, int&gt; ElevatorRequestProcessed; public event Action&lt;int, int&gt; ElevatorExternalRequestProcessed; public event Action&lt;int&gt; OpenDoorPressed; public event Action&lt;int&gt; CloseDoorPressed; ``` 分别用于处理电梯移动，电梯楼层请求被处理和电梯外部请求被处理，开门按钮被按下和关门按钮被按下； - 在Form1中订阅这些事件： ```csharp manage. ElevatorMoved += Manage_ElevatorMoved; manage. ElevatorRequestProcessed += Manage_ElevatorRequestProcessed; manage. ElevatorExternalRequestProcessed += Manage_ExternalRequestProcessed; manage. OpenDoorPressed += Manage_OpenDoorPressed; manage. CloseDoorPressed += Manage_CloseDoorPressed; ``` - 事件订阅是一个在软件设计中常见的模式，它属于更广泛的发布-订阅（pub-sub）模式。在这种模式中，组件可以宣布（发布）某些事件的发生，而其他组件可以表达对这些事件的兴趣（订阅），当事件发生时，这些订阅了事件的组件会自动接收通知并作出相应的响应。 - 例如，在ElevatorController的pullUpward方法中，执行下面这个片段，程序会检验电梯当前所在楼层是否存在请求，如果有，则请求被响应，事件被触发，接着订阅了事件的方法将会被调用，楼层按钮和上行按钮的高亮会消失，电梯也能得到位置的更新： ```csharp while (elevators[elevatorIndex]. getCurrentFloor() != elevators[elevatorIndex]. getTargetFloor()) {elevators[elevatorIndex]. move();if (upRequest[elevatorIndex, elevators[elevatorIndex]. getCurrentFloor()] == 1){  upRequest[elevatorIndex, elevators[elevatorIndex]. getCurrentFloor()] = 0;  ElevatorRequestProcessed. Invoke(elevatorIndex, elevators[elevatorIndex]. getCurrentFloor());  ElevatorExternalRequestProcessed. Invoke(elevators[elevatorIndex]. getCurrentFloor(), 1);}ElevatorMoved. Invoke(elevatorIndex, elevators[elevatorIndex]. getCurrentFloor()); } if (elevators[elevatorIndex]. getCurrentFloor() == i) {upRequest[elevatorIndex, i] = 0;ElevatorRequestProcessed. Invoke(elevatorIndex, i);ElevatorExternalRequestProcessed. Invoke(i, 1); } ``` ### 定义计时器 - 定时器（Timer）在编程中用于在设定的时间间隔内重复执行某些任务，或者在一定的延迟之后执行任务。checkElevatorTimer. Elapsed += CheckElevatorStatus; 这行代码表示将 CheckElevatorStatus 方法绑定到定时器的 Elapsed 事件。这意味着每当定时器的计时周期结束时，CheckElevatorStatus 方法将被自动调用。AutoReset = true 设置定时器在触发 Elapsed 事件后自动重新开始计时。这使得定时器成为一个重复触发的周期性定时器。 - 项目中一共使用了三个定时器，分别用于播放动画，检查电梯状态，以及更新乘客列表： ```csharp private void InitializeTimer() {animationTimer. Interval = 200; // 设置动画帧切换的时间间隔为200毫秒animationTimer. Tick += new EventHandler(AnimationTimer_Tick);updateTimer = new System. Windows. Forms. Timer();updateTimer. Interval = 1000; // 更新间隔设置为1000毫秒（1秒）updateTimer. Tick += new EventHandler(UpdateTimer_Tick);updateTimer. Start();// 初始化定时器checkElevatorTimer = new System. Timers. Timer(1000); // 设置时间间隔为1秒checkElevatorTimer. Elapsed += CheckElevatorStatus;checkElevatorTimer. AutoReset = true;checkElevatorTimer. Enabled = true; // 初始状态为禁用 } ``` - `CheckElevatorStatus`定时检查是否有电梯到达了乘客的目标楼层，并更新电梯的状态标签： ```csharp private async void CheckElevatorStatus(Object source, System. Timers. ElapsedEventArgs e) {// 在Task. Run内执行需要在UI线程上完成的操作await Task. Run(() =&gt;{  Invoke((MethodInvoker)delegate  {    foreach (var passenger in passengers)    {      if (!passenger. isHandled &amp;&amp; manage. elevators[passenger. assignedElevator]. getCurrentFloor() == passenger. currentFloor)      {        passenger. isHandled = true;        messageBox. AppendText($ Please press the open door button for Elevator {passenger. assignedElevator + 1} to let the passenger in. {Environment. NewLine} );        var openTcs = new TaskCompletionSource&lt;bool&gt;();        openDoorTcs[passenger. assignedElevator] = openTcs;        openTcs. Task. ContinueWith(async t =&gt;        {          // 等待两秒后，执行后续逻辑          await Task. Delay(2000);          openDoorButtons[passenger. assignedElevator]. BackColor = Color. White;          var closeTcs = new TaskCompletionSource&lt;bool&gt;();          closeDoorTcs[passenger. assignedElevator] = closeTcs;          await closeTcs. Task;          // 关门后延迟两秒          await Task. Delay(2000);          closeDoorButtons[passenger. assignedElevator]. BackColor = Color. White;          Invoke((MethodInvoker)(() =&gt; toTargetFloorOfPassenger(passenger. id, passenger. assignedElevator, passenger. targetFloor)));        }, TaskScheduler. FromCurrentSynchronizationContext());      }    }  });});// 其他状态更新也必须在UI线程上执行Invoke((MethodInvoker)delegate{  for (int i = 0; i &lt; ElevatorsCount; i++)  {    Elevator elevator = manage. elevators[i];    status currentStatus = elevator. getStatus();    int capacity = elevator. getCapacity();    elevatorCapacityLabels[i]. Text = $ Capacity: {capacity} ;    // 更新状态标签颜色及文字    UpdateElevatorStatusLabels(currentStatus, i);  }}); } ```"
    }, {
    "id": 15,
    "url": "http://localhost:4000/Elevator-en/",
    "title": "Elevator Scheduling - Tongji University Operating System Course Project",
    "body": "2025/12/14 - Development Environment:  Development Environment: Windows 11 Development Software: Visual Studio 2022 Development Language: C# Main Referenced Modules: System, System. ThreadingImplemented Features:  Interconnected Up and Down Buttons: When the up or down buttons at the elevator entrance are pressed, all five elevators receive this request. The scheduling algorithm determines which specific elevator will respond to the request.  Independent Floor Buttons: Each elevator has its own floor buttons. When a floor button inside an elevator is pressed, that specific elevator responds to the request, with the timing determined by the scheduling algorithm.  Passenger Addition Function: Supports adding passengers by specifying their starting floor and destination floor. The scheduling algorithm decides which elevator will serve the passenger’s request.  Digital Display of Current Floor: Each elevator has a digital display showing its current floor.  Elevator Status Display: Each elevator has a label displaying its current status: up, down, wait, or alarm.  Elevator Capacity Display: Each elevator has a label showing its available capacity, initially set at 5.  Door Open and Close Buttons: When an elevator reaches a passenger’s floor or destination floor, it needs to complete door opening and closing operations.  Message Box: Displays prompt messages at specific times, showing which elevator has been assigned to a passenger and reminding users to open or close doors.  Passenger Status Table: Updates passenger locations in real-time based on their status, displaying only passengers who have not yet reached their destination floor. User Interface: User Guide:  Users can freely click number buttons and up/down buttons to let elevators run “empty” without passengers, which helps observe the actual performance of the elevator scheduling algorithm.  Users can also add passengers in the passenger management module on the right side, set their starting and destination floors, and observe which elevator the passenger is assigned to, as well as the actual floor changes when the passenger boards the elevator. When passengers reach their destination floor, they are removed from the table.  The status bar at the bottom displays prompt messages, reminding users to open and close doors when necessary.  Passengers can click the “Open” and “Close” buttons to open and close elevator doors, or press the “Alarm” button to put the elevator in alarm status.  The elevator’s current floor and remaining capacity are displayed above each elevator, while the current status is shown below each elevator. Main Design Approach: Implemented Classes:  Form1 Class: The main window of the program, responsible for UI display and updates, handling UI click events, managing passenger-related logic, and subscribing to events defined in ElevatorController.  ElevatorController Class: Implements the elevator scheduling algorithm, manages the elevator list, and defines key events.  Elevator Class: Records elevator properties, including current floor, target floor, status, and capacity. Provides common methods to set and retrieve these properties.  Passenger Class: Records each passenger’s ID, current floor, destination floor, assigned elevator, and whether the request has been processed. Elevator Class: The elevator entity records each elevator’s status (wait, up, down, alarm), current floor, and target floor. It defines necessary methods to get or set member variables within the elevator: namespace ElevatorSystem{  public enum status  {    wait, up, down, alarm  };  public class Elevator  {    status currentStatus;    int currentFloor;    int targetFloor;    int capacity;    public Elevator(int current=0,int target=0)    {       currentFloor = current;      targetFloor = target;      capacity = 5;      currentStatus = status. wait;    }    public int getCurrentFloor() { return currentFloor; }    public int getTargetFloor() { return targetFloor;}    public int getCapacity() { return capacity;}    public void takePassenger() { capacity--; }    public void ariveTargetFloor() { capacity++; }    public void setTargetFloor(int target) { targetFloor = target; }    public void setStatus(status sta) { currentStatus = sta; }    public status getStatus() { return currentStatus; }    public void up()    {       currentStatus = status. up;      if (currentFloor &lt; 20)      {        currentFloor++;        Thread. Sleep(500);      }    }    public void down()    {      currentStatus = status. down;      if (currentFloor &gt; 0)      {        currentFloor--;        Thread. Sleep(500);      }    }    public void move()    {      if (currentFloor &lt; targetFloor) up();      if (currentFloor &gt; targetFloor) down();    }    public bool check()    {      if (capacity &lt; 0)      {        currentStatus = status. alarm;        return false;      }      return true;    }  }}Passenger Class: The passenger entity records each passenger’s ID, current floor, destination floor, assigned elevator, and whether the request has been handled: namespace ElevatorSystem{  public class Passenger  {    public int id { get; set; }    public int currentFloor { get; set; }    public int targetFloor { get; set; }    public int assignedElevator { get; set; } // Stores the elevator number after assignment    public bool isHandled { get; set; } = false; // Default is false, indicating unprocessed    public Passenger(int ID, int current, int target, int assigned)    {      id = ID;      currentFloor = current;      targetFloor = target;      assignedElevator = assigned;    }  }}Relationships Between Classes: The interaction between the two classes is achieved by introducing an instance of ElevatorController named “manage” in Form1. Event subscriptions defined in ElevatorController are completed in Form1’s initialization function: public Form1(){  InitializeComponent();  InitializeElevatorUI();  InitialMassageBox();  InitializeFloorRequestButtons();  InitializePassengerManagementUI();  manage = new ElevatorController();    // Event subscriptions  manage. ElevatorMoved += Manage_ElevatorMoved;  manage. ElevatorRequestProcessed += Manage_ElevatorRequestProcessed;  manage. ElevatorExternalRequestProcessed += Manage_ExternalRequestProcessed;  manage. OpenDoorPressed += Manage_OpenDoorPressed;  manage. CloseDoorPressed += Manage_CloseDoorPressed;   LoadImages();  InitializeTimer();} In Form1, a list of Passenger type called passengers is defined to manage passengers.  In ElevatorController, an array of Elevator type called elevators is defined to manage the five elevators. Scheduling Algorithm:  Four two-dimensional arrays are defined in ElevatorController to record up and down requests that need processing, as well as up and down requests waiting to be processed:public int[,] upRequest = new int[ElevatorsCount, FloorsCount];public int[,] downRequest = new int[ElevatorsCount, FloorsCount];// The wait arrays store requests that require the elevator to change status before processingpublic int[,] waitUpRequest = new int[ElevatorsCount,FloorsCount];public int[,] waitDownRequest = new int[ElevatorsCount, FloorsCount];   The wait arrays store requests that require the elevator to undergo a status change before processing.     When the up button is pressed, public int handleUpRequest(int floor) is called to process the up request. When the down button is pressed, public int handleDownRequest(int floor) is called to process the down request. Both functions return the assigned elevator number. Specifically, the scheduling algorithm works as follows (using up request processing as an example):     Calculate the distance between each elevator and the floor where the up button was pressed based on each elevator’s status and location:          If the elevator is stationary, this distance equals the absolute value of the elevator’s floor minus the up button’s floor.           If the elevator is moving upward, there are two cases:          If the elevator’s current floor is higher than the up button’s floor, the distance equals the absolute value of the highest floor in the elevator’s current upward requests minus the elevator’s floor, plus the absolute value of the highest floor in the elevator’s current upward requests minus the up button’s floor.      If the elevator’s current floor is lower than the up button’s floor, the distance equals the absolute value of the elevator’s current floor minus the up button’s floor.               If the elevator is moving downward, the distance equals the absolute value of the lowest floor in the elevator’s current downward requests minus the elevator’s floor, plus the absolute value of the lowest floor in the elevator’s current downward requests minus the up button’s floor.          Select the elevator closest to the floor where the up button was pressed and add the floor to its upward request list:      If the elevator is currently stationary, there are two cases:         If the up button’s floor is higher than the elevator’s floor, add the request to upRequest[elevatorIndex,floor], as the elevator will soon change to upward status and can process the request immediately.      If the up button’s floor is lower than the elevator’s floor, add the request to waitUpRequest[elevatorIndex,floor], as the elevator needs to first change to downward status, then to upward status, before processing the request.           If the elevator is currently moving upward, there are two cases:         If the up button’s floor is higher than the elevator’s floor, add the request to upRequest[elevatorIndex,floor], as the elevator can respond to the request without changing status.      If the up button’s floor is lower than the elevator’s floor, add the request to waitUpRequest[elevatorIndex,floor], as the elevator needs to change status to respond to the request.           If the elevator is moving downward, add the request directly to waitUpRequest[elevator,Index], as the elevator needs to change status to respond to the request.    public int handleUpRequest(int floor){  int minDist = FloorsCount + 1;  int elevatorIndex = ElevatorsCount;  for(int i=0;i&lt;ElevatorsCount;i++)  {    int currentFloor = elevators[i]. getCurrentFloor();    if (elevators[i]. getStatus()==status. alarm)    {      continue;    }    if (elevators[i]. getStatus()==status. wait)    {      if(Math. Abs(currentFloor-floor) &lt; minDist)      {        minDist=Math. Abs(currentFloor-floor);        elevatorIndex=i;      }    }    else if (elevators[i]. getStatus()==status. up)    {      if(currentFloor &lt;= floor)      {        if(Math. Abs(currentFloor-floor)&lt;minDist)        {           minDist = Math. Abs(currentFloor-floor);          elevatorIndex = i;         }      }      else if(currentFloor &gt; floor)      {        int tmp = 0;        // Find the highest floor in current upward requests        for(int j=FloorsCount-1;j&gt;=0;j--)        {          if (upRequest[i, j] == 1)          {            tmp = j;            break;          }        }        // Calculate distance        int dist = Math. Abs(tmp - currentFloor) + Math. Abs(tmp - floor);        if(dist&lt;minDist)        {          minDist=dist;          elevatorIndex = i;        }      }    }    else if (elevators[i]. getStatus()==status. down)    {      int tmp = 0;      // Find the lowest floor in current downward requests      for(int j=0;j&lt;FloorsCount;j++)      {        if (downRequest[i, j] == 1)        {          tmp = j;          break;        }      }      int dist=Math. Abs(tmp - currentFloor) + Math. Abs(tmp - floor);      if(dist&lt;minDist)       {        minDist=dist;        elevatorIndex = i;      }    }  }  int currenFloor = elevators[elevatorIndex]. getCurrentFloor();  if (elevators[elevatorIndex]. getStatus()==status. wait)   {        if(floor &gt;= currenFloor)      upRequest[elevatorIndex, floor] = 1;    else      waitUpRequest[elevatorIndex, floor] = 1;        //upRequest[elevatorIndex, floor] = 1;  }  else if (elevators[elevatorIndex]. getStatus()==status. up)      {    if (floor &gt;= currenFloor)      upRequest[elevatorIndex, floor] = 1;    else      waitUpRequest[elevatorIndex, floor] = 1;  }  else    waitUpRequest[elevatorIndex,floor] = 1;  return elevatorIndex;} When a floor button is pressed, upRequest and downRequest are directly modified. When a floor lower than the elevator’s current floor is pressed in an upward-moving elevator, it will not be responded to. Similarly, when a floor higher than the current floor is pressed in a downward-moving elevator, it will not be responded to:private void FloorButton_Click(object sender, EventArgs e, int elevatorIndex, int floor){  Button clickButton = sender as Button;    // Handle floor button click event  //MessageBox. Show($ Floor {floor + 1} button of Elevator {elevatorIndex + 1} was clicked );  if (manage. elevators[elevatorIndex]. getStatus()==status. up)  {    if (floor &gt;= manage. elevators[elevatorIndex]. getCurrentFloor())     {      manage. upRequest[elevatorIndex, floor] = 1;      if (clickButton != null)      {        clickButton. BackColor = Color. Green;      }    }  }  else if (manage. elevators[elevatorIndex]. getStatus()==status. down)   {    if (floor &lt;= manage. elevators[elevatorIndex]. getCurrentFloor())    {      manage. downRequest[elevatorIndex, floor] = 1;      if (clickButton != null)      {        clickButton. BackColor = Color. Green;      }    }  }  else  {    if (floor &gt;= manage. elevators[elevatorIndex]. getCurrentFloor())    {      manage. upRequest[elevatorIndex, floor] = 1;      if (clickButton != null)      {        clickButton. BackColor = Color. Green;      }    }    else     {      manage. downRequest[elevatorIndex,floor] = 1;      if (clickButton != null)      {        clickButton. BackColor = Color. Green;      }    }  }}Elevator Operation Logic:  A separate thread is started for each elevator, with threads set as background threads. Each thread executes the private void ElevatorRoutine(int elevatorIndex) method:private void StartElevatorThreads(){  for(int i=0;i&lt;ElevatorsCount;i++)  {    int index = i;    Thread elevatorThread = new Thread(() =&gt; ElevatorRoutine(index))    {      IsBackground = true    };    elevatorThread. Start();  }} private void ElevatorRoutine(int elevatorIndex) {  while (true)  {     Thread. Sleep(500);    pullUpward(elevatorIndex);    Thread. Sleep(500);    prepareForDown(elevatorIndex);    Thread. Sleep(500);    pushDownward(elevatorIndex);    Thread. Sleep(500);    prepareForUp(elevatorIndex);  }} Upward requests are processed in void pullUpward(int elevatorIndex), and downward requests are processed in void pushDownward(int elevatorIndex).  Processing of waitUpRequest and waitDownRequest occurs in prepareForUp and prepareForDown respectively.  Threads are started in the ElevatorController’s initialization function:public ElevatorController(){  for(int i=0;i&lt;elevators. Length; i++)   {    elevators[i] = new Elevator();  }  for(int i=0;i &lt; ElevatorsCount;i++)  {    for(int j=0;j &lt; FloorsCount;j++)    {      upRequest[i, j] = 0;      downRequest[i, j] = 0;      waitUpRequest[i, j] = 0;      waitDownRequest[i, j] = 0;    }  }  StartElevatorThreads();}Event Definitions:  Five events are defined in ElevatorController:public event Action&lt;int, int&gt; ElevatorMoved;public event Action&lt;int, int&gt; ElevatorRequestProcessed;public event Action&lt;int, int&gt; ElevatorExternalRequestProcessed;public event Action&lt;int&gt; OpenDoorPressed;public event Action&lt;int&gt; CloseDoorPressed;These are used to handle elevator movement, processing of elevator floor requests and external requests, and door open/close button presses.  These events are subscribed to in Form1:manage. ElevatorMoved += Manage_ElevatorMoved;manage. ElevatorRequestProcessed += Manage_ElevatorRequestProcessed;manage. ElevatorExternalRequestProcessed += Manage_ExternalRequestProcessed;manage. OpenDoorPressed += Manage_OpenDoorPressed;manage. CloseDoorPressed += Manage_CloseDoorPressed;   Event subscription is a common pattern in software design, belonging to the broader publish-subscribe (pub-sub) pattern. In this pattern, components can announce (publish) the occurrence of certain events, while other components can express interest in these events (subscribe). When events occur, these subscribing components automatically receive notifications and respond accordingly.     For example, in the pullUpward method of ElevatorController, when executing the following code segment, the program checks whether there is a request at the elevator’s current floor. If there is, the request is responded to and the event is triggered. Then, methods that subscribed to the event will be called, the highlighting of floor buttons and up buttons will disappear, and the elevator’s position will be updated:  while (elevators[elevatorIndex]. getCurrentFloor() != elevators[elevatorIndex]. getTargetFloor()){  elevators[elevatorIndex]. move();  if (upRequest[elevatorIndex, elevators[elevatorIndex]. getCurrentFloor()] == 1)  {    upRequest[elevatorIndex, elevators[elevatorIndex]. getCurrentFloor()] = 0;    ElevatorRequestProcessed. Invoke(elevatorIndex, elevators[elevatorIndex]. getCurrentFloor());    ElevatorExternalRequestProcessed. Invoke(elevators[elevatorIndex]. getCurrentFloor(), 1);  }  ElevatorMoved. Invoke(elevatorIndex, elevators[elevatorIndex]. getCurrentFloor());}if (elevators[elevatorIndex]. getCurrentFloor() == i){  upRequest[elevatorIndex, i] = 0;  ElevatorRequestProcessed. Invoke(elevatorIndex, i);  ElevatorExternalRequestProcessed. Invoke(i, 1);}Timer Definitions:    Timers in programming are used to repeatedly execute certain tasks at set intervals or to execute tasks after a certain delay. The code checkElevatorTimer. Elapsed += CheckElevatorStatus; binds the CheckElevatorStatus method to the timer’s Elapsed event. This means that whenever the timer’s cycle ends, the CheckElevatorStatus method will be automatically called. AutoReset = true sets the timer to automatically restart after triggering the Elapsed event, making it a repeating periodic timer.     Three timers are used in the project: one for playing animations, one for checking elevator status, and one for updating the passenger list:  private void InitializeTimer(){  animationTimer. Interval = 200; // Set animation frame switching interval to 200 milliseconds  animationTimer. Tick += new EventHandler(AnimationTimer_Tick);  updateTimer = new System. Windows. Forms. Timer();  updateTimer. Interval = 1000; // Set update interval to 1000 milliseconds (1 second)  updateTimer. Tick += new EventHandler(UpdateTimer_Tick);  updateTimer. Start();  // Initialize timer  checkElevatorTimer = new System. Timers. Timer(1000); // Set time interval to 1 second  checkElevatorTimer. Elapsed += CheckElevatorStatus;  checkElevatorTimer. AutoReset = true;  checkElevatorTimer. Enabled = true; // Initial state is disabled} CheckElevatorStatus periodically checks whether any elevator has reached a passenger’s destination floor and updates the elevator’s status label:private async void CheckElevatorStatus(Object source, System. Timers. ElapsedEventArgs e){  // Execute operations that need to be completed on the UI thread within Task. Run  await Task. Run(() =&gt;  {    Invoke((MethodInvoker)delegate    {      foreach (var passenger in passengers)      {        if (!passenger. isHandled &amp;&amp; manage. elevators[passenger. assignedElevator]. getCurrentFloor() == passenger. currentFloor)        {          passenger. isHandled = true;          messageBox. AppendText($ Please press the open door button for Elevator {passenger. assignedElevator + 1} to let the passenger in. {Environment. NewLine} );          var openTcs = new TaskCompletionSource&lt;bool&gt;();          openDoorTcs[passenger. assignedElevator] = openTcs;          openTcs. Task. ContinueWith(async t =&gt;          {            // Wait two seconds, then execute subsequent logic            await Task. Delay(2000);            openDoorButtons[passenger. assignedElevator]. BackColor = Color. White;            var closeTcs = new TaskCompletionSource&lt;bool&gt;();            closeDoorTcs[passenger. assignedElevator] = closeTcs;            await closeTcs. Task;            // Delay two seconds after closing door            await Task. Delay(2000);            closeDoorButtons[passenger. assignedElevator]. BackColor = Color. White;            Invoke((MethodInvoker)(() =&gt; toTargetFloorOfPassenger(passenger. id, passenger. assignedElevator, passenger. targetFloor)));          }, TaskScheduler. FromCurrentSynchronizationContext());        }      }    });  });  // Other status updates must also be executed on the UI thread  Invoke((MethodInvoker)delegate  {    for (int i = 0; i &lt; ElevatorsCount; i++)    {      Elevator elevator = manage. elevators[i];      status currentStatus = elevator. getStatus();      int capacity = elevator. getCapacity();      elevatorCapacityLabels[i]. Text = $ Capacity: {capacity} ;      // Update status label colors and text      UpdateElevatorStatusLabels(currentStatus, i);    }  });}"
    }, {
    "id": 16,
    "url": "http://localhost:4000/LeetCode1219/",
    "title": "力扣第1219题黄金矿工时间复杂度新解",
    "body": "2025/12/11 - 算法思路: 用二维向量存储金矿的分布情况。算法首先遍历整个金矿，对于不为0的坐标将其设为起点，用DFS回溯搜索整张图，搜索过程中将已走过的坐标标记（金子数置0），同时记录当前收集到的金子数量。 类中有一个 max 变量记录最多收集到的金子数量，一个 path 变量记录最优情况的路径。当找到收集金子更多的路径时，会同时更新 max 与 path。回溯时，记录当前路径的栈 pop 一次，并释放标记。由此，即可找出收集黄金最多的路径与金子数。 复杂度分析: 鉴于搜索的结果取决于对有金子区域的遍历，因此设有金子区域一共有 \(k\) 个。再设行数为 \(m\)，列数为 \(n\)。显然，\(k \le mn\)，因此后续涉及 \(\min\{mn, k\}\) 运算时可以直接化简为 \(k\)。 在算法中使用了两个栈存储路径，因此空间复杂度为 \(O(k+k)\)，即 \(O(k)\)。 将每次向前探索作为基本操作。每个有金子的地点都可以作为起点开始DFS遍历，因此一共有 \(k\) 次遍历。在每次遍历中，除第一个地点外，每个地点都有最多三个不同的方向继续前进遍历，因此探索操作至少有 $3k$ 次。可知时间复杂度最差为 \(O(3^k)\)。 但是自己输入一个 \(k=25\) 的地图数据发现执行效率相当高，并没有体现出以3为底指数函数的低效率，推断“每个起点的总探索操作上限 \(3^k\) 次”这个数据将上限抬得过高。 因为探索操作都产生在有金子的格子里，所以将其单独拿出分析，对于任何一条收集路线，除开首尾两格，中间的格子被路线穿过都不外乎如下七种情况：  左进上出或上进左出——简写为 LU 右进上出或上进右出——简写为 RU 还有 LD、RD、LR、UD 没有被路线穿过的情况，记为 N这样原先由每个格子三种探索方向构成的解空间树就变成了对每个格子其中穿过情况生成解空间树。 再将整张图中所有有金子的格子（除首尾）如下交错划分成黑白两种：（此处为方便说明假设它们恰好聚在这 \(3 \times 3\) 格子里） 从刚才的 7 种情况可以知道，如果我们确定每个黑色格子的情况，白色格子的情况就被确定了，所以我们只需要考虑黑色格子，显然这样的划分形成了 \(k/2\) 数量级的黑格子。 解空间树生成时，遍历 B 的 7 种情况前它周围四个角的黑格情况已经被确定了（除开首尾，这对时间复杂度分析没有影响），图中假设 A 被确定为 LR，那么 B 只剩 LU、RU、UD、N 四种情况。其它同理，因此实际上生成解空间树时每个黑格子下一步能够做出的探索选择只有 4 种，时间复杂度最差不超过 \(O(4^{k/2}) = O(2^k)\)。 实际情况下因为有金子的格子不会总是聚在一起，因此每个黑格子的选择大概率会少于 4 种，时间复杂度会更低。 综上，最差时间复杂度不超过 \(O(2^k)\)。 本题恰好是算法课作业遇到的，觉得网上的时间分析和体感不同，稍作改进。 "
    }, {
    "id": 17,
    "url": "http://localhost:4000/About-This-Website/",
    "title": "关于本站 - About This Website",
    "body": "2025/11/10 - Welcome to Hyrule Royal Warehouse. This is a personal blog website with no commercial intent. Here you can find blogs about computing, coding, applications and theories behind them. You can find all blogs bilingual with Chinese and English. They might not be side-by-side, but both cover same contents. All blogs are free to share and repost with citation. You can also buy me a coffee if you find the website useful. Really appreciate that. 欢迎来到海拉鲁皇家仓库。本站无商业用途，内容涵盖计算机、代码、应用及其背后的支持理论。所有文章都一式两份（中英）。转载文章需标明来源。在首页可以打赏。 "
    }];

var idx = lunr(function () {
    this.ref('id')
    this.field('title')
    this.field('body')

    documents.forEach(function (doc) {
        this.add(doc)
    }, this)
});


    
function lunr_search(term) {
    $('#lunrsearchresults').show( 1000 );
    $( "body" ).addClass( "modal-open" );
    
    document.getElementById('lunrsearchresults').innerHTML = '<div id="resultsmodal" class="modal fade show d-block"  tabindex="-1" role="dialog" aria-labelledby="resultsmodal"> <div class="modal-dialog shadow-lg" role="document"> <div class="modal-content"> <div class="modal-header" id="modtit"> <button type="button" class="close" id="btnx" data-dismiss="modal" aria-label="Close"> &times; </button> </div> <div class="modal-body"> <ul class="mb-0"> </ul>    </div> <div class="modal-footer"><button id="btnx" type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Close</button></div></div> </div></div>';
    if(term) {
        document.getElementById('modtit').innerHTML = "<h5 class='modal-title'>Search results for '" + term + "'</h5>" + document.getElementById('modtit').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><small><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></small></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>Sorry, no results found. Close & try a different search!</li>";
        }
    }
    return false;
}
</script>
<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>




<form class="bd-search hidden-sm-down" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
<input type="text" class="form-control text-small"  id="lunrsearch" name="q" value="" placeholder="Type keyword and enter..."> 
</form>
            </ul>
        </div>
    </div>
    </nav>

    <!-- Search Results -->
    <div id="lunrsearchresults">
        <ul class="mb-0"></ul>
    </div>

    <!-- Content -->
    <main role="main" class="site-content">
        <div class="container">
    

    
    
    
<!-- Begin post excerpts, let's highlight the first 4 posts on top -->
<div class="row remove-site-content-margin">
    
    <!-- latest post -->
    
    <div class="col-md-6">
    <div class="card border-0 mb-4 box-shadow">   
    <a href="/LeetCode1219-en/">
    <div class="topfirstimage" style="background-image: url( /assets/images/leetcode1219/cover.jpg); height: 200px;    background-size: cover;    background-repeat: no-repeat;"></div>     
    </a>
    <div class="card-body px-0 pb-0 d-flex flex-column align-items-start">
    <h2 class="h4 font-weight-bold">
    <a class="text-dark" href="/LeetCode1219-en/">A New Perspective on Time Complexity for LeetCode 1219: Path with Maximum Gold</a>
    </h2>
    <p class="excerpt">
        Algorithm Approach
    </p>
    <div>
        <small class="d-block text-muted">
            In <span class="catlist">
                
                <a class="text-capitalize text-muted smoothscroll" href="/categories.html#algorithm">Algorithm</a><span class="sep">, </span>
                
                </span>                   
        </small>
        <small class="text-muted">
            Dec 15, 2025
        </small>
    </div>
    </div>
    </div>
    </div>
    
    <div class="col-md-6">
        
        <!-- second latest post --><div class="mb-3 d-flex align-items-center">                
                
                <div class="col-md-4">
                <a href="/Elevator/">
                 <img class="w-100" src="http://localhost:4000/assets/images/elevator/cover.jpg" alt="电梯调度 - 同济大学操作系统课设">
                </a>
                </div>
                                
                <div>
                    <h2 class="mb-2 h6 font-weight-bold">
                    <a class="text-dark" href="/Elevator/">电梯调度 - 同济大学操作系统课设</a>
                    </h2>
                    <small class="d-block text-muted">
                        In <span class="catlist">
                        
                        <a class="text-capitalize text-muted smoothscroll" href="/categories.html#算法">算法</a><span class="sep">, </span>
                        
                        </span>                   
                    </small>
                    <small class="text-muted">
                        Dec 15, 2025
                    </small>
                </div>
            </div>
        
        <!-- third latest post --><div class="mb-3 d-flex align-items-center">                
                
                <div class="col-md-4">
                <a href="/Elevator-en/">
                 <img class="w-100" src="/assets/images/elevator/cover.jpg" alt="Elevator Scheduling - Tongji University Operating System Course Project">
                </a>
                </div>
                                
                <div>
                    <h2 class="mb-2 h6 font-weight-bold">
                    <a class="text-dark" href="/Elevator-en/">Elevator Scheduling - Tongji University Operating System Course Project</a>
                    </h2>
                    <small class="d-block text-muted">
                        In <span class="catlist">
                        
                        <a class="text-capitalize text-muted smoothscroll" href="/categories.html#algorithm">Algorithm</a><span class="sep">, </span>
                        
                        </span>                   
                    </small>
                    <small class="text-muted">
                        Dec 14, 2025
                    </small>
                </div>
            </div>
        
        <!-- fourth latest post --><div class="mb-3 d-flex align-items-center">                
                
                <div class="col-md-4">
                <a href="/LeetCode1219/">
                <img class="w-100" src="/assets/images/leetcode1219/cover.jpg" alt="力扣第1219题黄金矿工时间复杂度新解">
                </a>
                </div>
                                
                <div>
                    <h2 class="mb-2 h6 font-weight-bold">
                    <a class="text-dark" href="/LeetCode1219/">力扣第1219题黄金矿工时间复杂度新解</a>
                    </h2>
                    <small class="d-block text-muted">
                        In <span class="catlist">
                        
                        <a class="text-capitalize text-muted smoothscroll" href="/categories.html#算法">算法</a><span class="sep">, </span>
                        
                        </span>                   
                    </small>
                    <small class="text-muted">
                        Dec 11, 2025
                    </small>
                </div>
            </div>
        
    </div>
    
</div>
    
<!-- Sticky - add sticky tag to the post you want to highlight here - tags: [sticky] -->
 

 

 

 

 

<div class="jumbotron jumbotron-fluid jumbotron-home pt-0 pb-0 mt-3 mb-2rem bg-lightblue position-relative">
    <div class="pl-4 pr-0 h-100 tofront">
        <div class="row justify-content-between">
            <div class="col-md-6 pt-6 pb-6 pr-lg-4 align-self-center">
                <h1 class="mb-3">关于本站 - About This Website</h1>
                <p class="mb-3 lead">
                    Welcome to Hyrule Royal Warehouse.
                </p>
                <a href="/About-This-Website/" class="btn btn-dark">Read More</a>
            </div>
            <div class="col-md-6 d-none d-md-block pr-0" style="background-size:cover;background-image:url(/assets/images/About/cover.jpg);">	
            </div>
        </div>
    </div>
</div> 




    


 <!--endif page url is / -->
    


<!-- Now the rest of the posts with the usual loop but with an offset:4 on the first page so we can skeep the first 4 posts displayed above -->
    
<div class="row mt-3">
   
    <div class="col-md-8 main-loop">
        
        <h4 class="font-weight-bold spanborder"><span>All Stories</span></h4>
        

        
        
            <div class="mb-5 d-flex justify-content-between main-loop-card">
<div class="pr-3">
	<h2 class="mb-1 h4 font-weight-bold">
	<a class="text-dark" href="/About-This-Website/">关于本站 - About This Website</a>
	</h2>
	<p class="excerpt">
	   Welcome to Hyrule Royal Warehouse.
	</p>
	<small class="d-block text-muted">
		In <span class="catlist">
		
		<a class="text-capitalize text-muted smoothscroll" href="/categories.html#入门">入门</a><span class="sep">, </span>
		
		<a class="text-capitalize text-muted smoothscroll" href="/categories.html#start">Start</a><span class="sep">, </span>
		
		</span>
	</small>
	<small class="text-muted">
		Nov 10, 2025
	</small>
</div>

	<div class="col-md-3 pr-0 text-right">
	<a href="/About-This-Website/">
	<img class="w-100" src="/assets/images/About/cover.jpg" alt="关于本站 - About This Website">
	</a>
	</div>

</div>
        
        
        
        <div class="mt-5">
         <!-- Pagination links -->
                  
        </div>
        
    </div>
    
    <div class="col-md-4">
        <div class="sticky-top sticky-top-offset">
    <h4 class="font-weight-bold spanborder"><span>Featured</span></h4>  
    <ol class="list-featured">				
           
    </ol>
</div>     
    </div>
    
</div>



</div>
    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <script src="/assets/js/theme.js"></script>


    <!-- Footer -->
    <!-- <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <span class="navbar-brand mr-2 mb-0"><strong>Mundana</strong></span>
                <span>Copyright © <script>document.write(new Date().getFullYear())</script>.</span> -->

                <!--  Github Repo Star Btn-->
                <!-- <a class="text-dark ml-1" target="_blank" href="https://github.com/wowthemesnet/mundana-theme-jekyll"><i class="fab fa-github"></i> Fork on Github</a>

            </div>
            <div>
                Made with <a target="_blank" class="text-dark font-weight-bold" href="https://www.wowthemes.net/mundana-jekyll-theme/"> Mundana Jekyll Theme </a> by <a class="text-dark" target="_blank" href="https://www.wowthemes.net">WowThemes</a>.
            </div>
        </div>
        </div>
    </footer> -->

    <!-- All this area goes before </body> closing tag --> 


    <footer class="footer">
  <data class="u-url" href="/"></data>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="text-muted">
          © 2025 Hyrule Royal Academy
        </p>
        
        <!-- 不蒜子访问统计 -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <p class="text-muted small">
          <span id="busuanzi_container_site_pv">
            本站总访问量 <span id="busuanzi_value_site_pv"></span> 次
          </span>
        </p>
      </div>
    </div>
  </div>
</footer>
</body>

</html>
